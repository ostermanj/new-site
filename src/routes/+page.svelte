<script lang="ts">
	import NameImage from "./NameImage.svelte";
</script>
<header>
    <h1>
        <span class="u-visually-hidden">john osterman</span>
        <div aria-hidden="true" class="svg-wrapper">
            <NameImage></NameImage>
        </div>
    </h1>
</header>
<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Numquam magnam, rem neque vitae esse tenetur fugiat natus molestias hic laborum saepe incidunt explicabo, eum officia deleniti! Ab, sed. Tenetur asperiores eaque in nesciunt deserunt? Explicabo eos delectus voluptate veniam laboriosam incidunt, error vero, esse maxime numquam quam quasi reprehenderit quaerat odio veritatis laudantium, obcaecati neque porro nisi deserunt minus magni laborum odit consequuntur. Magnam enim saepe aperiam perferendis ipsum doloremque delectus aliquam facere architecto laudantium voluptas quam harum error voluptatem odio earum, eos rem commodi. Mollitia a distinctio explicabo rerum dolorum ea, doloremque perspiciatis vel enim voluptatem, quos quia consequatur?</p>
<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Numquam magnam, rem neque vitae esse tenetur fugiat natus molestias hic laborum saepe incidunt explicabo, eum officia deleniti! Ab, sed. Tenetur asperiores eaque in nesciunt deserunt? Explicabo eos delectus voluptate veniam laboriosam incidunt, error vero, esse maxime numquam quam quasi reprehenderit quaerat odio veritatis laudantium, obcaecati neque porro nisi deserunt minus magni laborum odit consequuntur. Magnam enim saepe aperiam perferendis ipsum doloremque delectus aliquam facere architecto laudantium voluptas quam harum error voluptatem odio earum, eos rem commodi. Mollitia a distinctio explicabo rerum dolorum ea, doloremque perspiciatis vel enim voluptatem, quos quia consequatur?</p>
<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Numquam magnam, rem neque vitae esse tenetur fugiat natus molestias hic laborum saepe incidunt explicabo, eum officia deleniti! Ab, sed. Tenetur asperiores eaque in nesciunt deserunt? Explicabo eos delectus voluptate veniam laboriosam incidunt, error vero, esse maxime numquam quam quasi reprehenderit quaerat odio veritatis laudantium, obcaecati neque porro nisi deserunt minus magni laborum odit consequuntur. Magnam enim saepe aperiam perferendis ipsum doloremque delectus aliquam facere architecto laudantium voluptas quam harum error voluptatem odio earum, eos rem commodi. Mollitia a distinctio explicabo rerum dolorum ea, doloremque perspiciatis vel enim voluptatem, quos quia consequatur?</p>
<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Numquam magnam, rem neque vitae esse tenetur fugiat natus molestias hic laborum saepe incidunt explicabo, eum officia deleniti! Ab, sed. Tenetur asperiores eaque in nesciunt deserunt? Explicabo eos delectus voluptate veniam laboriosam incidunt, error vero, esse maxime numquam quam quasi reprehenderit quaerat odio veritatis laudantium, obcaecati neque porro nisi deserunt minus magni laborum odit consequuntur. Magnam enim saepe aperiam perferendis ipsum doloremque delectus aliquam facere architecto laudantium voluptas quam harum error voluptatem odio earum, eos rem commodi. Mollitia a distinctio explicabo rerum dolorum ea, doloremque perspiciatis vel enim voluptatem, quos quia consequatur?</p>
<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Numquam magnam, rem neque vitae esse tenetur fugiat natus molestias hic laborum saepe incidunt explicabo, eum officia deleniti! Ab, sed. Tenetur asperiores eaque in nesciunt deserunt? Explicabo eos delectus voluptate veniam laboriosam incidunt, error vero, esse maxime numquam quam quasi reprehenderit quaerat odio veritatis laudantium, obcaecati neque porro nisi deserunt minus magni laborum odit consequuntur. Magnam enim saepe aperiam perferendis ipsum doloremque delectus aliquam facere architecto laudantium voluptas quam harum error voluptatem odio earum, eos rem commodi. Mollitia a distinctio explicabo rerum dolorum ea, doloremque perspiciatis vel enim voluptatem, quos quia consequatur?</p>
<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Numquam magnam, rem neque vitae esse tenetur fugiat natus molestias hic laborum saepe incidunt explicabo, eum officia deleniti! Ab, sed. Tenetur asperiores eaque in nesciunt deserunt? Explicabo eos delectus voluptate veniam laboriosam incidunt, error vero, esse maxime numquam quam quasi reprehenderit quaerat odio veritatis laudantium, obcaecati neque porro nisi deserunt minus magni laborum odit consequuntur. Magnam enim saepe aperiam perferendis ipsum doloremque delectus aliquam facere architecto laudantium voluptas quam harum error voluptatem odio earum, eos rem commodi. Mollitia a distinctio explicabo rerum dolorum ea, doloremque perspiciatis vel enim voluptatem, quos quia consequatur?</p>
<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Numquam magnam, rem neque vitae esse tenetur fugiat natus molestias hic laborum saepe incidunt explicabo, eum officia deleniti! Ab, sed. Tenetur asperiores eaque in nesciunt deserunt? Explicabo eos delectus voluptate veniam laboriosam incidunt, error vero, esse maxime numquam quam quasi reprehenderit quaerat odio veritatis laudantium, obcaecati neque porro nisi deserunt minus magni laborum odit consequuntur. Magnam enim saepe aperiam perferendis ipsum doloremque delectus aliquam facere architecto laudantium voluptas quam harum error voluptatem odio earum, eos rem commodi. Mollitia a distinctio explicabo rerum dolorum ea, doloremque perspiciatis vel enim voluptatem, quos quia consequatur?</p>
<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Numquam magnam, rem neque vitae esse tenetur fugiat natus molestias hic laborum saepe incidunt explicabo, eum officia deleniti! Ab, sed. Tenetur asperiores eaque in nesciunt deserunt? Explicabo eos delectus voluptate veniam laboriosam incidunt, error vero, esse maxime numquam quam quasi reprehenderit quaerat odio veritatis laudantium, obcaecati neque porro nisi deserunt minus magni laborum odit consequuntur. Magnam enim saepe aperiam perferendis ipsum doloremque delectus aliquam facere architecto laudantium voluptas quam harum error voluptatem odio earum, eos rem commodi. Mollitia a distinctio explicabo rerum dolorum ea, doloremque perspiciatis vel enim voluptatem, quos quia consequatur?</p>
<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Numquam magnam, rem neque vitae esse tenetur fugiat natus molestias hic laborum saepe incidunt explicabo, eum officia deleniti! Ab, sed. Tenetur asperiores eaque in nesciunt deserunt? Explicabo eos delectus voluptate veniam laboriosam incidunt, error vero, esse maxime numquam quam quasi reprehenderit quaerat odio veritatis laudantium, obcaecati neque porro nisi deserunt minus magni laborum odit consequuntur. Magnam enim saepe aperiam perferendis ipsum doloremque delectus aliquam facere architecto laudantium voluptas quam harum error voluptatem odio earum, eos rem commodi. Mollitia a distinctio explicabo rerum dolorum ea, doloremque perspiciatis vel enim voluptatem, quos quia consequatur?</p>
<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Numquam magnam, rem neque vitae esse tenetur fugiat natus molestias hic laborum saepe incidunt explicabo, eum officia deleniti! Ab, sed. Tenetur asperiores eaque in nesciunt deserunt? Explicabo eos delectus voluptate veniam laboriosam incidunt, error vero, esse maxime numquam quam quasi reprehenderit quaerat odio veritatis laudantium, obcaecati neque porro nisi deserunt minus magni laborum odit consequuntur. Magnam enim saepe aperiam perferendis ipsum doloremque delectus aliquam facere architecto laudantium voluptas quam harum error voluptatem odio earum, eos rem commodi. Mollitia a distinctio explicabo rerum dolorum ea, doloremque perspiciatis vel enim voluptatem, quos quia consequatur?</p>
<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Numquam magnam, rem neque vitae esse tenetur fugiat natus molestias hic laborum saepe incidunt explicabo, eum officia deleniti! Ab, sed. Tenetur asperiores eaque in nesciunt deserunt? Explicabo eos delectus voluptate veniam laboriosam incidunt, error vero, esse maxime numquam quam quasi reprehenderit quaerat odio veritatis laudantium, obcaecati neque porro nisi deserunt minus magni laborum odit consequuntur. Magnam enim saepe aperiam perferendis ipsum doloremque delectus aliquam facere architecto laudantium voluptas quam harum error voluptatem odio earum, eos rem commodi. Mollitia a distinctio explicabo rerum dolorum ea, doloremque perspiciatis vel enim voluptatem, quos quia consequatur?</p>
<style>
    @keyframes test {
        0% {
            transform: scaleY(1) scaleX(1);
            opacity: 1;
            filter: saturate(1) hue-rotate(0deg);
        }
        34% {
            transform: scaleY(1) scaleX(1);
            opacity: 1;
            filter: saturate(1) hue-rotate(0deg);
        }
        60% {
            transform: scaleY(2.5) scaleX(0.75);
            opacity: 1;
            filter: saturate(1.5) hue-rotate(90deg);
        }
        85% {
            transform: rotate(90deg) scaleY(2.5) scaleX(0.75);
            opacity: 1;
            filter: saturate(1.5) hue-rotate(90deg);
        }
        100% {
            transform: rotate(90deg) scaleY(2.5) scaleX(0.75);
            opacity: 1;
            filter: saturate(1.5) hue-rotate(90deg);
        }
    }
    
    header {
        display: flex;
        align-items: end;
        justify-content: end;
        background-color: oklch(0.82 0.08 225.77);
        color: var(--c-primary-1);
        height: 100dvh;
        outline: 1px solid magenta;
        view-timeline-name: --observerTimeline;
        
    }
    h1 {
        display: flex;
        justify-content: end;
        width: 101.5%;
    }
    .svg-wrapper {
        display: flex;
        align-items: end;
        width: 100%;
        margin-bottom: -2.4%;
        margin-inline-end: -1.5%;
        transform-origin: right bottom;
    }
    .observer-target {
        width: 100%;
        height: 100%;
    }
        
    @media (min-aspect-ratio: 1/1){
        .svg-wrapper {
            width: 80%;
            margin-bottom: -1.9%;
            margin-inline-end: -1.2%;
        }
    }
    @media (min-aspect-ratio: 9/6){
        .svg-wrapper {
            width: 75%;
            margin-inline-end: -1.2%;
        }
    }
    @media (min-aspect-ratio: 5/3){
        .svg-wrapper {
            width: 70%;
            margin-bottom: -1.7%;
            margin-inline-end: -1.1%;
        }
    }
    @media (min-aspect-ratio: 11/6){
        .svg-wrapper {
            width: 65%;
            margin-bottom: -1.6%;
            margin-inline-end: -1%;
        }
    }
    @media (min-aspect-ratio: 2/1){
        .svg-wrapper {
            width: 50%;
            margin-bottom: -1.2%;
            margin-inline-end: -0.8%;
        }
    }
    /* TODO: change this to something else */
    @supports ((animation-timeline: scroll()) and (animation-range: 0% 100%)) {
    /* @supports (nonexistent: 100%) { */
        header { 
            height: 200dvh;
        }
        h1 {
            position: fixed;
            inset-inline-end: 0;
            inset-block-end: 0;
            transform-origin: bottom right;
            transition: transform 200ms ease-in;
        }
        .observer-target {
            height: 100vh;
            width: 100%;
            outline: 1px solid cyan;
        }
        .svg-wrapper {
            animation-name: test;
            animation-fill-mode: both;
            animation-timeline: --observerTimeline;
        }
    }
    /* @supports ((animation-timeline: scroll()) and (animation-range: 0% 100%)) {
        header { 
            display: revert;
            height: 200dvh;
            animation: fade-out linear;
            animation-timeline: --header-progress;
        }
        .svg-wrapper-outer {
            perspective: 200vw;
            perspective-origin: bottom right;
            position: fixed;
    
        }
    
        .svg-wrapper {
            animation: rotate-back ease-in;
            animation-timeline: --header-progress;
            animation: rotate-back ease-in;
            animation-timeline: --header-progress;
        }
        p {
            color: oklch(0.89 0.04 225.77);
        }
    } */
</style>
