<p class="rich text">It’s a good time to be a web developer. The excesses of client-side mania (mea culpa) are giving way to a rediscovery of server-side rendering (which of course never went anywhere). Build-and-deploy services like Vercel, Amplify, Azure Static Web Apps, and a host of others make it easy for small teams or one lone freelancer to set up fully featured websites with edge functions, caching, APIs, and smart image delivery. And with recent advances, especially in CSS, working on the <a href="https://bradfrost.com/blog/post/front-of-the-front-end-and-back-of-the-front-end-web-development/">front of the front end</a> is full of new possibilities and productivity gains.</p><p class="rich text">CSS, it turns out, <a href="https://duckduckgo.com/?t=ffab&q=css+is+awesome&iax=images&ia=images">really is awesome</a>.</p><h2>Container queries, finally!</h2><p class="rich text">One of the features I and others have been most eagerly awaiting is container queries. They will make reusing responsive components in different contexts much easier. Grid and flexbox layouts have already lessened the need to use media queries to make layouts responsive to screen size. They are <a href="https://talks.jensimmons.com/15TjNW"><i>intrinsically</i> responsive</a>, wrapping rows and columns based on container size without the need to instruct browsers at exactly what screen width to make the change.</p><style id="s-TD_NiAHPgPpR">
    .grid.s-TD_NiAHPgPpR {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 0.5rem;
    }
 .s-TD_NiAHPgPpR{}
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHdvVXAuc3ZlbHRlIiwibWFwcGluZ3MiOiI7QUFrQkEsSUFBSSxvQkFBSyxDQUFDO0FBQ1YsUUFBUSxhQUFhO0FBQ3JCLFFBQVEsNERBQTREO0FBQ3BFLFFBQVEsV0FBVztBQUNuQiIsIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiVHdvVXAuc3ZlbHRlIl19 */</style><style id="s--45mLXsdSCwp">
     .figure.s--45mLXsdSCwp {
        background-color: #fff;
        padding: 1rem;
        filter: drop-shadow(0px 0px 3px var(--c-background-1));
        font-family: PassionOne;
    }
    figcaption.s--45mLXsdSCwp {
        letter-spacing: 0.5px;
    }
 .s--45mLXsdSCwp{}
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmlndXJlLnN2ZWx0ZSIsIm1hcHBpbmdzIjoiO0FBVUEsS0FBSyxzQkFBTyxDQUFDO0FBQ2IsUUFBUSxzQkFBc0I7QUFDOUIsUUFBUSxhQUFhO0FBQ3JCLFFBQVEsc0RBQXNEO0FBQzlELFFBQVEsdUJBQXVCO0FBQy9CO0FBQ0EsSUFBSSx5QkFBVSxDQUFDO0FBQ2YsUUFBUSxxQkFBcUI7QUFDN0IiLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbIkZpZ3VyZS5zdmVsdGUiXX0= */</style>
<!--[--><!--[!--><!--[!--><!--[--><div class="grid s-TD_NiAHPgPpR"><!--[--><figure class="tc-1 figure flow s--45mLXsdSCwp"><img src="//images.ctfassets.net/3qr5d6sj491p/5c3gZQDg7YwjqWwPNRZybi/34d67b517736ba14d35a77aa1e242f43/Screenshot_2023-01-11_at_8.56.40_AM.png?w=1344&amp;fm=png" alt="A series of event content cards, each with a thumbnail image to the left and the date and title of the event to the right. The events shown read: Assassination of Archduke Franz Ferdinand, The Armenian Genocide, and Battle of the Somme." width="756" height="880" loading="lazy" style="height:auto;"><!----> <!--[--><figcaption class="s--45mLXsdSCwp"><!--362i4b--><p>On small screens less than 500px wide, no description is shown.</p><!----></figcaption><!--]--></figure><!----><figure class="tc-1 figure flow s--45mLXsdSCwp"><img src="//images.ctfassets.net/3qr5d6sj491p/2zrWLBAT2ahMA0tLtIXEsu/17eab9d573cec6fb7b263f5b092dab57/Screenshot_2023-01-11_at_8.55.12_AM.png?w=1344&amp;fm=png" alt="A screenshot showing a content card with a thumbnail image  showing destruction from World War One on the left and text to the right. The text reads:  June 28, 1914: Assassination of Archduke Franz Ferdinand The assassination of Archduke Franz Ferdinand precipitates the start of the massive armed conflict in Europe now known as the First World War." width="1224" height="640" loading="lazy" style="height:auto;"><!----> <!--[--><figcaption class="s--45mLXsdSCwp"><!--1bpy1ep--><p>On screens at least 500px wide, a media query ensures that the description is shown.</p><!----></figcaption><!--]--></figure><!----><!--]--></div><!----><!--]--><!--]--><!--]--><!--]--><p class="rich text">That’s great, but they haven’t entirely eliminated my use of media queries. There is still a need to employ them to, for instance, hide an element within a grid at certain screen sizes. Here’s a recent example from my work rebuilding the timeline-of-events pages for the <a href="https://encyclopedia.ushmm.org/content/en/timeline/holocaust">Holocaust Encyclopedia</a>.</p><style id="s-kkb7dh_tZiLb">
    pre.s-kkb7dh_tZiLb {
        overflow-x: auto;
    }
 .s-kkb7dh_tZiLb{}
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29kZUJsb2NrLnN2ZWx0ZSIsIm1hcHBpbmdzIjoiO0FBaUJBLElBQUksa0JBQUcsQ0FBQztBQUNSLFFBQVEsZ0JBQWdCO0FBQ3hCIiwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJDb2RlQmxvY2suc3ZlbHRlIl19 */</style>
<!--[--><!--[!--><!--[!--><!--[!--><!--[--><pre class="tc-2 s-kkb7dh_tZiLb"><code class="s-kkb7dh_tZiLb">&lt;article class="tl-all-wrapper" title="Assassination of Archduke Franz Ferdinand">
    &lt;a class="tl-all-link" href="/content/en/timeline-event/holocaust/before-1933/assassination-of-archduke-franz-ferdinand">
        &lt;div class="tl-all-info-cont tl-event-dot">
            &lt;header>
                &lt;p class="tl-all-event-date">
                    June 28, 1914
                &lt;/p>
                &lt;p class="tl-all-event-title">
                    &lt;strong>Assassination of Archduke Franz Ferdinand&lt;/strong>
                &lt;/p>
            &lt;/header>
            &lt;div class="tl-all-event-desc">
                &lt;p>The assassination of Archduke Franz Ferdinand precipitates the start of the massive armed conflict in Europe now known as the First World War.&lt;/p>
            &lt;/div>
        &lt;/div>
        &lt;div class="tl-all-image-cont">
            &lt;img aria-hidden="false" loading="lazy" class="tl-all-image" src="/images/small/bd80a239-69bc-4e46-a98a-1ac29e5349cd.jpg" srcset="/images/small/bd80a239-69bc-4e46-a98a-1ac29e5349cd.jpg 1x, /images/medium/bd80a239-69bc-4e46-a98a-1ac29e5349cd.jpg 2x" sizes="" alt="Scene of destruction during World War I" width="800" height="571">
        &lt;/div>
    &lt;/a>
&lt;/article></code></pre><!----><!--]--><!--]--><!--]--><!--]--><!--]--><p class="rich text">On small screens less than 500px wide, no description is shown.On screens at least 500px wide, a media query ensures that the description is shown.</p><p class="rich text">This is the HTML for one of the content cards, each marked up as an <code>&lt;article&gt;</code>:</p><p class="rich text">The CSS makes each event a flexbox with two flex-item children: the container for the image and the container for the text. The relative size of the two children is handled intrinsically using the <code>flex-grow</code> css property—no need for media queries there. But we wanted to show the description of the event only on screens larger than 500px wide, and that required a media query:</p><p class="rich text">What that means, though, is that the list of events isn’t 100% reusable in other contexts. Say I needed to put the list of events in a sidebar that was 320px wide? If the viewport were at least 500px wide, the event description would show even though the component would be much narrower than the threshold. The logic should be based on the size of the component, not the size of the screen. That’s what container queries make possible.</p><h2>Simple syntax</h2><p class="rich text">The syntax is pretty simple and builds what we already know from media queries. See the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Container_Queries">MDN article</a> for a full description.</p><p class="rich text">Changing my example to use container queries would only require changing to CSS to declare a containment context on the <code>article</code> element, giving it a <code>container-type</code> and <code>container-name</code> using the <code>container</code> shorthand syntax:</p><p class="rich text">And then modify the media query from above to be a container query instead:</p><p class="rich text">Pretty great! Now displaying or hiding the description depends on the size of the container rather than the viewport. That means the component can be used elsewhere without having to redefine at what screen sizes the description should appear. Code it once and use it everywhere.</p><h2>Use them now?</h2><p class="rich text">I’ll be using container queries from here on out in personal projects soon, I hope, in work projects for production.</p><p class="rich text">Container queries are landing in browsers and, at the time I’m writing this, have about 75% browser support globally. Firefox, notably, does not yet support them in the stable release but does in the nightly release. Coverage should be good enough now or very soon to use them in a progressive-enhancement sort of way, when you can accept that some browsers won’t abide.</p><p class="rich text">There is a <a href="https://github.com/GoogleChromeLabs/container-query-polyfill">JavaScript polyfill</a> available that simply works. Please read its docs before using.</p>